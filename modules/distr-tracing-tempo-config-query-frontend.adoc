// Module included in the following assemblies:
//
// * distr_tracing_tempo/distr-tracing-tempo-configuring.adoc

:_mod-docs-content-type: REFERENCE
[id="distr-tracing-tempo-config-query_{context}"]
= Query configuration options

Query is a service that retrieves traces from storage and hosts the user interface to display them.

.Configuration parameters for the Querier
[options="header"]
|===
|Parameter |Description |Values |Default value

|`nodeSelector`
|The simple form of the node-selection constraint.
|type: object
|

|`replicas`
|Specifies the number of replicas to be created for the component.
|type: integer; format: int32
|

|`tolerations`
|Specifies component-specific pod tolerations.
|type: array
|
|===


.Configuration parameters for the Query Frontend
[options="header"]
|===
|Parameter |Description |Values |Default value

|`component`
|Configuration of the Query Frontend component.
|type: object
|

|`nodeSelector` (inside component)
|The simple form of the node selection constraint.
|type: object
|

|`replicas` (inside component)
|Specifies the number of replicas to be created for the component.
|type: integer; format: int32
|

|`tolerations` (inside component)
|Specifies component-specific pod tolerations.
|type: array
|

|`jaegerQuery`
|Specifies the options specific to Jaeger Query.
|type: object
|

|`enabled` (inside jaegerQuery)
|When `enabled`, creates the Jaeger Query component,`jaegerQuery`.
|type: boolean
|

|`ingress` (inside jaegerQuery)
|Specifies the options for the Jaeger Query Ingress.
|type: object
|

|`annotations` (inside jaegerQuery.ingress)
|Specifies the annotations of the Ingress object.
|type: object
|

|`host` (inside jaegerQuery.ingress)
|Specifies the hostname of the Ingress object.
|type: string
|

|`ingressClassName` (inside jaegerQuery.ingress)
|The name of an IngressClass cluster resource. Defines which Ingress controller serves this Ingress resource.
|type: string
|

|`route` (inside jaegerQuery.ingress)
|Specifies OpenShift Route specific options.
|type: object
|

|`termination` (inside jaegerQuery.ingress.route)
|The termination type. The default is `edge`.
|type: string (enum: insecure, edge, passthrough, reencrypt)
|

|`type` (inside jaegerQuery.ingress)
|Specifies the type of Ingress for the Jaeger Query UI. The following types are supported: `ingress`, `route`, and `none`.
|type: string (enum: ingress, route)
|

|`monitorTab` (inside jaegerQuery)
|MonitorTab defines monitor tab configuration.
|type: object
|

|`enabled` (inside jaegerQuery.monitorTab)
|Enables monitoring tab in Jaeger console. PrometheusEndpoint needs to be set to enable the feature.
|type: boolean
|

|`prometheusEndpoint` (inside jaegerQuery.monitorTab)
|PrometheusEndpoint configures endpoint to the Prometheus that contains span RED metrics. For instance on OpenShift this is set to https://thanos-querier.openshift-monitoring.svc.cluster.local:9091
|type: string
|

|===

.Sample Query configuration
[source,yaml]
----
apiVersion: tempo.grafana.com/v1alpha1
kind: TempoStack
metadata:
  name: simplest
spec:
  storage:
    secret:
      name: minio
      type: s3
  storageSize: 200M
  resources:
    total:
      limits:
        memory: 2Gi
        cpu: 2000m
  template:
    queryFrontend:
      jaegerQuery:
        enabled: true
        ingress:
          route:
            termination: edge
          type: route
----
